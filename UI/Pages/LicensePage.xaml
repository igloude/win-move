<Page
    x:Class="WinMove.UI.Pages.LicensePage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <ScrollViewer Padding="24">
        <StackPanel Spacing="24" MaxWidth="600" HorizontalAlignment="Left">
            <TextBlock Text="License" Style="{StaticResource TitleTextBlockStyle}" Margin="0,0,0,4" />

            <!-- Stale warning banner -->
            <InfoBar x:Name="StaleWarningBar"
                     IsOpen="False" IsClosable="True"
                     Severity="Warning"
                     Title="License verification"
                     Message="Couldn't verify your license recently. Connect to the internet and click Refresh." />

            <!-- Current Plan -->
            <StackPanel Spacing="8">
                <TextBlock Text="Current Plan" Style="{StaticResource SubtitleTextBlockStyle}" />
                <StackPanel Orientation="Horizontal" Spacing="12" VerticalAlignment="Center">
                    <Border x:Name="TierBadge" CornerRadius="4" Padding="12,4">
                        <TextBlock x:Name="TierBadgeText" FontWeight="SemiBold" FontSize="14" />
                    </Border>
                </StackPanel>
                <TextBlock x:Name="UpdatesUntilText" Visibility="Collapsed"
                           Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                <TextBlock x:Name="LastVerifiedText" Visibility="Collapsed"
                           Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                <TextBlock Text="Your license never expires. If your update window ends, you can keep using your current version forever."
                           TextWrapping="Wrap" Foreground="{ThemeResource TextFillColorTertiaryBrush}"
                           FontStyle="Italic" Margin="0,4,0,0" />
            </StackPanel>

            <!-- Activate License -->
            <StackPanel Spacing="8">
                <TextBlock Text="Activate License" Style="{StaticResource SubtitleTextBlockStyle}" />
                <TextBox x:Name="LicenseKeyInput" PlaceholderText="Enter your license key"
                         IsEnabled="True" />
                <StackPanel Orientation="Horizontal" Spacing="8">
                    <Button x:Name="ActivateButton" Content="Activate"
                            Style="{StaticResource AccentButtonStyle}" Click="OnActivateClick" />
                    <ProgressRing x:Name="ActivateProgress" IsActive="False"
                                  Width="20" Height="20" VerticalAlignment="Center" />
                </StackPanel>
                <TextBlock x:Name="ActivateStatusText" TextWrapping="Wrap"
                           Visibility="Collapsed" />
            </StackPanel>

            <!-- Manage License (visible when activated) -->
            <StackPanel x:Name="ManageSection" Spacing="8" Visibility="Collapsed">
                <TextBlock Text="Manage License" Style="{StaticResource SubtitleTextBlockStyle}" />
                <StackPanel Orientation="Horizontal" Spacing="8">
                    <Button x:Name="RefreshButton" Content="Refresh License" Click="OnRefreshClick" />
                    <ProgressRing x:Name="RefreshProgress" IsActive="False"
                                  Width="20" Height="20" VerticalAlignment="Center" />
                </StackPanel>
                <Button x:Name="RenewButton" Content="Renew Updates" Click="OnRenewClick"
                        Visibility="Collapsed" />
                <Button x:Name="UpgradeButton" Content="Upgrade to Lifetime" Click="OnUpgradeClick"
                        Visibility="Collapsed" />
            </StackPanel>
        </StackPanel>
    </ScrollViewer>
</Page>
